// verificar no django se o DNI já está cadastrado para a verificação de DNI que já cadastrado rodar com sucesso
// 95716146

start-permissions-routine

press "ic map menu"
tap "Registrarme ahora"
tap "Con tu tarjeta de crédito"
// --- DESBLOQUEAR BOTÃO SIGUIENTE
    // --- email validation
        save value "Tembici@123" as "userPassword" 
        enter stored value "userPassword" into "Contraseña"
        check that button "siguiente" is disabled

        enter "error" into "E-mail"
        check that button "siguiente" is disabled

        enter "error@" into "error"
        check that button "siguiente" is disabled

        enter "error@mail.com" into "error@"
        check that button "siguiente" is enabled
    // --- password validation
        enter "tembici" into "•••••••••••"
        check that button "siguiente" is disabled

        enter "tembicis" into "•••••••"
        check that button "siguiente" is enabled

        enter "Tembici@" into "••••••••"
        check that button "siguiente" is enabled

        enter "Tembici1" into "••••••••"
        check that button "siguiente" is enabled
// --- USUÁRIO JÁ REGISTRADO
        enter stored value "username" into "error@mail.com"
        tap "siguiente"
        check that page contains "Registrarme"
        // error user already registered
    // --- create new user to continue with the test
        generate by regex "tremEcobici-iOS\.dni[0-9]{7}\@testrigor-mail\.com" then enter into stored value "username" and save as "userMail"
        tap "siguiente"
        tap "ingresar manualmente"
// --- DESBLOQUEAR BOTÃO SEGUIR
    check that button "Seguir" is disabled
    // --- invalid DNI and unfilled gender
        enter stored value "DOCUMENT_DNI_1" into "DNI expedido"
        enter stored value "TRAMITE_DNI_1" into "Número de trámite"
        enter stored value "NAME_DNI_1" into "Mismo nombre"
        enter stored value "BIRTH_DNI_1" into "Fecha de nacimiento"
        tap "ic checkmark"
        check that button "Seguir" is disabled
        tap "Género"
        enter "Femenino" into "Masculino"
        tap "Listo"
        check that button "Seguir" is enabled
        
        enter "" into stored value "DOCUMENT_DNI_1"
        check that button "Seguir" is disabled

        enter "1234567" into "DNI expedido"
        check that button "Seguir" is disabled

        enter "1234567890" into "1234567"
        check that button "Seguir" is disabled
    // --- invalid tramite
        enter stored value "DOCUMENT_DNI_1" into "1234567890"
        enter "" into stored value "TRAMITE_DNI_1"
        check that button "Seguir" is disabled
        // o campo tramite aceita qualquer sequência de +1 números, só a verificação de vazio encaixa nessa parte do teste
    // --- invalid name
        enter stored value "TRAMITE_DNI_1" into "Número de trámite"
        enter "Juan" into stored value "NAME_DNI_1"
        check that button "Seguir" is disabled

        enter "Juan P" into "Juan"
        check that button "Seguir" is disabled
    // --- invalid birth
        enter stored value "NAME_DNI_1" into "Juan"

        enter "" into stored value "BIRTH_DNI_1"
        check that button "Seguir" is disabled

        enter "32/05/1994" into "Fecha de nacimiento"
        check that button "Seguir" is disabled

        enter "01/13/1994" into "32/05/1994"
        check that button "Seguir" is disabled
        enter stored value "BIRTH_DNI_1" into "01/13/1994"
// --- DATA PROVIDED DOESNT MATCH
    // --- dni incorrect
        enter "12345678" into stored value "DOCUMENT_DNI_1"
        tap "Seguir"
        check that page contains "Registro personal"
        // check for error box
        enter stored value "DOCUMENT_DNI_1" into "12345678"
    // --- tramite incorrect
        enter "1234" into stored value "TRAMITE_DNI_1"
        tap "Seguir"
        check that page contains "Registro personal"
        // check for error box
        enter stored value "TRAMITE_DNI_1" into "1234"
    // --- name incorrect
        enter "Juan Pablo" into stored value "NAME_DNI_1"
        tap "Seguir"
        check that page contains "Registro personal"
        // check for error box
        enter stored value "NAME_DNI_1" into "Juan Pablo"
    // --- gender incorrect
        tap "Femenino"
        enter "Masculino" into "Femenino"
        tap "Listo"
        tap "Seguir"
        check that page contains "Registro personal"
        // check for error box

        tap "Masculino"
        enter "Otro" into "Masculino"
        tap "Listo"
        tap "Seguir"
        check that page contains "Registro personal"
        // check for error box

        tap "Otro"
        enter "Femenino" into "Otro"
        tap "Listo"
    // --- birth date incorrect
        enter "16/05/1994" into stored value "BIRTH_DNI_1"
        tap "Seguir"
        check that page contains "Registro personal"
        // check for error box
        enter stored value "BIRTH_DNI_1" into "16/05/1994"     
// --- USER ALREADY REGISTERED
    tap "Seguir"
    check that page contains "Registro personal"
    // check for error box